<div class="ranWrapper">
	<div class="hoverrerr"></div>

	<nav>
		<ul>
			<li class="cpunc">cpunc</li>
			<li class="infra">infra</li>
			<li class="milkn">milkn</li>
		</ul>
	</nav>

	<div class="random-image"></div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script>
	$(function() {
        let theColl = "2598205";
        let swColl
		let ranNum;
		let reset = false;

		// Fetch from Unsplash
		//
		let unsp = plugColl => {
			ranNum = new Date().getTime();
			console.log("");

			$(".random-image")
				.css({
					"background-image":
						"url(https://source.unsplash.com/collection/" +
						plugColl +
						"/3840x2160?" +
						ranNum +
						")"
				})
				.delay(1000)
				.fadeIn(2000)
				.delay(10000)
				.fadeOut(2000)
				.delay(1000)

				.queue(function(next) {
                    let that = $(this)
                    
                    // Loop through default or selected collection
                    // 
					if (reset === false) {
                        console.log('reset: ' + reset)
                        console.log('plugColl: ' + plugColl)

						unsp(plugColl);
                        next();
                    
                    // Switch to new, selected collection
                    // 
					} else {
                        console.log('reset: ' + reset)
                        console.log('new collection : ' + theColl)

                        reset = false
                        
                        // kill the running queue.
                        // reinit it with the new collection
                        // 
                        that.clearQueue()
                        unsp(theColl);
                    }
				});
		};


        // Fire it up
        // 
        console.log('theColl: ' + theColl)
        unsp("2598205");
        

        // Trigger the switch to the selected collection
        // 
		$("li").click(function() {
			reset = true

			swColl = $(this).attr("class");

			switch (swColl) {
				case "cpunc":
                    console.log("swColl: " + swColl);
                    
                    theColl = "2598205"
					unsp(theColl);
					break;

				case "infra":
                    console.log("swColl: " + swColl);
                    
                    theColl = "9710463"
					unsp(theColl);
					break;

				default:
					unsp("2598205");
			}
		});
	});
</script>
